(function(c,d){if(c.define){return}function e(i){return Object.prototype.toString.call(i)==="[object Function]"}var g={};var k=null;var b=document.getElementsByTagName("script");for(var m=0,j=b.length;m<j&&!k;m++){k=b[m].getAttribute("data-main")}if(!k){throw new Error("No data-main attribute in script tag.")}function h(l){if(!g[l]){throw new Error("Module "+l+" is not defined.")}var i=g[l];if(i.inited===false){f(l)}return i.ret}function f(o){var n={};var l=g[o];if(e(g[o].factory)){var i=g[o].factory.apply(d,[h,n,d]);l.ret=i===d?n:i}else{l.ret=g[o].factory}l.inited=true}function a(i,n,l){if(g[i]){throw new Error("Module "+i+" has been defined already.")}if(e(n)){l=n}g[i]={factory:l,inited:false};if(i===k){f(i)}}c.define=a})(window);define("common/es5",function(c,b,a){(function(d){d.bind||(d.bind=function(e){var f=this;return function(){return f.apply(e,arguments)}})})(Function.prototype);(function(d){var e=d.setInterval;var f=d.setTimeout;d.setInterval=function(){var g=arguments;var i=g[0];var j=g[1];var h=Array.prototype.slice.call(g,2);return e(function(){i.apply(window,h)},j)};d.setTimeout=function(){var g=arguments;var i=g[0];var j=g[1];var h=Array.prototype.slice.call(g,2);return f(function(){i.apply(window,h)},j)}})(window)});define("common/lib_plus",function(e,b,a){var f=e("common/config");var d=e("common/user_account");(function(){var k=$(".def-feild");var i;var j;k.live("focus",function(){var l=$(this);i=$.trim(l.val());j=l.attr("def-data");if(i===j){l.val("");l.removeClass("color-gray")}});k.live("blur",function(){var l=$(this);i=$.trim(l.val());j=l.attr("def-data");if(i===""||i===j){l.val(j);l.addClass("color-gray")}})})();$(".js-log").live("click",function(){var k=$(this);var j=k.data("log");var i;var l;if(!j){return}i=k.closest(".mod");l=f.log+j;if(i.length!==0&&i.id!==""){l+="&mod="+i.attr("id")}$("<img>").attr("src",l)});$("a").live("click",function(){var i=$(this).attr("href");if(!i||!window._gaq){return}if(i.indexOf(location.host)===7||i.indexOf(location.host)===8||i.indexOf("http")!=0){_gaq.push(["_trackEvent","Self","Click",i])}else{_gaq.push(["_trackEvent","Others","Click",i])}});$(".login").live("click",function(i){d.isLogin(function(){window.location.reload()});i.preventDefault()});$(".discount-f-share").live({mouseover:function(){$(this).addClass("active")},mouseout:function(){$(this).removeClass("active")}});$(".discount-f-share .discount-share-ctn a").live("click",function(){var i=$(this).data("url");$.ajax({url:i,type:"GET",dataType:"json",timeout:30000,cache:false,success:function(j){},error:function(j){}})});$(".discount-f-fav a").live("click",function(k){var i=$(this).data("id");var j=$(this).parent().parent().find(".discount-f-fav");d.isActive(function(){$.fancybox.close();j.eq(0).fadeOut("fast",function(){j.eq(1).fadeIn("fast")});$.ajax({url:f.favor(i),type:"GET",dataType:"json",timeout:30000,cache:false,success:function(l){},error:function(l){}})});k.preventDefault()});var h=e("common/key.scorll");h.init();var g=(function(){var i;return{showError:function(j){if(!i){i=$("#tmpl-promptDialog")}if(!j||typeof j!=="string"){j=f.errorMsg}$.fancybox.show(i.tmpl({message:j}))},confirm:function(j){var k=e("common/transceiver").create();k.trigger("oauth:cancel:dailog",j)},userAccount:d,faq:function(){var j=["http://chat10.live800.com/live800/chatClient/chatbox.jsp?companyID=210734&configID=181519&jid=2116824014&skillId=10527","&enterurl=",window.location.href].join("");window.open(j,"","width=600px, height=500px, top=0, left=0, toolbar=no, menubar=0, scrollbars=no, resizable=no, location=no, status=no")}}})();var c=e("common/app.ctrl");c.extend(g);e("common/app_loading");e("common/selection");e("common/phone.auth");e("common/fancybox.plus")});define("modules/global/top/notice_remind",function(e,c,b){var f={events:{},on:function(g,i,h){this.events[g]=this.events[g]||[];this.events[g].push({callback:i,context:h})},trigger:function(g,h){$.each(this.events[g],function(i,j){j.callback.call(j.context,h)})}};var d=$.extend({},f,{data:{},updateData:function(g){this.data=g;this.trigger("render",this.data)}});var a=(function(){var i=$("#top");var l=i.find(".msg");var h=i.find("b.count");var j=i.find(".msg-no-info");var g=i.find(".msg-info");var m=i.find(".show-msg");var k=g.find(".show-msg-ctn");var n={};return{init:function(){d.on("render",this.render,this)},render:function(){var o=d.data;var p=false;if(o.count===0){l.addClass("no-msg");g.hide();j.show();l.removeClass("current");m.hide();n=o.data;return}if(o.count>99){o.count="99+"}l.removeClass("no-msg");h.html(o.count);g.show();j.hide();k.hide();$.each(o.data,function(s,r){var q=k.filter("[data-name="+s+"]");q.find("b").html(r);q.show()});$.each(o.data,function(r,q){if(!n[r]||n[r]<q){p=true}});if(p){l.addClass("current");m.show()}n=o.data}}})();a.init();(function(){var j=e("common/cookie");var n=e("common/config");var p=e("common/transceiver").create();var q="notice";var i=n.noticeTime*1000;var m=3*1000;var l=null;if(!j.get("NTES_LOGINED")){return}function h(){try{$.ajax({cache:false,dataType:"json",timeout:30000,type:"GET",url:n.notice,success:function(t){var u={count:0,data:{}};if(t.status!=="succ"){g();return}$.each(t.data,function(x,w){var v=parseInt(w);if(v){u.count+=v;u.data[x]=v}});noticeMsg={data:u,isLock:false,lastUpdate:+new Date()};try{j.update(q,JSON.stringify(noticeMsg));d.updateData(noticeMsg.data)}catch(s){}},error:function(s){g()}})}catch(r){}}function g(){try{j.del(q)}catch(r){}window.clearInterval(l)}function k(){var s=JSON.stringify({isLock:true});try{j.update(q,s)}catch(r){j.add(q,s)}h()}function o(){var s=j.get(q);if(!j.get("NTES_LOGINED")){g();return}if(!s){k();return}try{s=unescape(s);s=JSON.parse(s);if(typeof s!=="object"||typeof s.isLock==="undefined"){k();return}}catch(r){k();return}if(s.isLock){return}if(+new Date()-s.lastUpdate>i){s.isLock=true;j.update(q,JSON.stringify(s));h();return}d.updateData(s.data)}l=window.setInterval(o,m);p.listen("top:notice",function(){var r=[].slice.call(arguments)[0];if(r.refresh){h()}})})()});define("modules/global/top/order_remind",function(h,b,a){var d=h("common/cookie");var k=h("common/config");var g="gw_fo";var j=k.noticeTime*1000;var e=null;var l=$("#fxOrderTips");function f(){var m=d.get(g);if(m&&m==="true"){l.fadeIn("fast")}}l.delegate(".close","click",function(m){d.update(g,"false");l.fadeOut("fast")});f();e=window.setInterval(f,j);if(!window.XMLHttpRequest){var i=function(){var n=$(document).scrollTop();var m=$(window).height();l.css("top",n+m-185+"px")};var c=null;var j=50;$(window).bind("scroll",function(){window.clearTimeout(c);c=window.setTimeout(i,j)});i()}});define("modules/global/top/top",function(g,d,c){var b=$("#top");var f=b.find(".welinfo");var a=b.find(".show-msg");var e=b.find(".sctop-help");var h=g("common/config");var i=g("common/transceiver").create();e.hover(function(){e.addClass("current")},function(){e.removeClass("current")});b.delegate(".welinfo-name","click",function(j){j.preventDefault();j.stopPropagation();f.toggleClass("active")});$(document).click(function(){if(f.hasClass("active")){f.removeClass("active")}});b.delegate(".msg","click",function(j){j.preventDefault();a.toggle();$(this).toggleClass("current")});b.delegate("span.ignore a","click",function(j){j.preventDefault();$.ajax({cache:false,dataType:"json",timeout:30000,type:"GET",url:h.readAll,success:function(k){a.hide();b.find(".msg").removeClass("current");i.trigger("top:notice",{refresh:true})},error:function(k){}})})});define("modules/global/search_box/suggest",function(e,c,b){$.widget("custom.gouwuComplete",$.ui.autocomplete,{_suggest:function(g){$.ui.autocomplete.prototype._suggest.call(this,g);var f=this.menu.element;var h=parseInt(f.css("top"))+10;f.css({top:h+"px","z-index":99})},_create:function(){$.ui.autocomplete.prototype._create.call(this);var f=this;this.element.unbind("keydown.autocomplete");this.element.bind("keydown.autocomplete",function(h){if(f.options.disabled||f.element.propAttr("readOnly")){return}var i=false;var g=$.ui.keyCode;switch(h.keyCode){case g.PAGE_UP:f._move("previousPage",h);break;case g.PAGE_DOWN:f._move("nextPage",h);break;case g.UP:f._move("previous",h);h.preventDefault();break;case g.DOWN:f._move("next",h);h.preventDefault();break;case g.ENTER:case g.NUMPAD_ENTER:if(f.menu.active){i=true}case g.TAB:if(!f.menu.active){return}f.menu.select(h);break;case g.ESCAPE:f.element.val(f.term);f.close(h);break;default:clearTimeout(f.searching);f.searching=setTimeout(function(){if(f.term!=f.element.val()){f.selectedItem=null;f.search(null,h)}},f.options.delay);break}});this.menu.element.click(function(g){if(!$(g.target).closest(".ui-menu-item a").length){return}if(f.selectedItem){d.selected.call(window,f.selectedItem)}})}});var d=(function(){var j=e("common/config");var l=j.getGoodsSugget;var m=null;var f=null;var i={};var h={callback:null,get:function(n){var o;if(m){m.remove();m=null}if(!!!f){f=$("body")}o=l+"&query="+encodeURIComponent(n);m=$('<script type="text/javascript" charset="utf-8" src='+o+">");f.append(m)},updateCall:function(n){if($.isFunction(this.callback)){this.callback(n)}}};var g=function(n){window.location=n.url};var k=function(n){n.gouwuComplete({source:function(q,o){var p=q.term;if(i[p]){o($.map(i[p].r,function(r){return r}));return}h.callback=function(r){i[p]=r;o($.map(r.r,function(s){return s}))};h.get(q.term)},select:function(p,o){}})};window._hui_goods=h;return{bind:k,selected:g}})();var a={init:function(){var f=$("div.mod-search-box input.search-value").eq(0);d.bind(f)}};a.init()});define("modules/global/search_box/tips",function(d,c,b){var a={init:function(){this.selector={sValue:"div.mod-search-box input.search-value",sButton:"div.mod-search-box input.search-btn"};this.$sValue=null;this.focus();this.addEvent()},focus:function(){var e=$(this.selector.sValue).eq(0);var g=$(document).scrollTop();var f=$("body").attr("class");if($.trim(e.val())===""){e.prev().show();if(f==="p-huihui-index"&&e.offset().top>g){e[0].focus()}}},addEvent:function(){var e=this.selector.sValue;this.onChange=this.onChange.bind(this);if($.browser.msie){$(document).delegate(e,"keydown",this.onChange);$(document).delegate(e,"keyup",this.onChange);$(document).delegate(e,"keypress",this.onChange)}else{$(document).delegate(e,"input",this.onChange)}$(document).delegate(e,"focus",this.onFocus);$(document).delegate(e,"blur",this.onBlur);this.onKeyDown=this.onKeyDown.bind(this);$(document).delegate(e,"keydown",this.onKeyDown);if(!window.XMLHttpRequest){$(document).delegate(this.selector.sButton,{mouseover:this.onBtnMouseOver,mouseout:this.onBtnMouseOut})}},onChange:function(f){var g=$(f.target);if($.trim(g.val())!==""){g.prev().hide()}},onKeyDown:function(f){if(!this.$sValue){this.$sValue=$(this.selector.sValue).eq(0)}if($.trim(this.$sValue.val())===""&&(f.keyCode===40||f.keyCode===38)){this.$sValue[0].blur()}},onFocus:function(f){$(f.target).prev().hide()},onBlur:function(f){var g=$(f.target);if($.trim(g.val())===""){g.prev().show()}},onBtnMouseOver:function(f){$(f.target).addClass("search-btn-hover")},onBtnMouseOut:function(f){$(f.target).removeClass("search-btn-hover")}};a.init()});define("modules/global/nav/nav",function(d,b,a){var h=$("#nav .shops");var e=$("#nav .toolbar-rss");var g=$("#nav .nav-toolbar-rss");var f=$("#nav .toolbar-rss-show");var c;h.hover(function(){h.addClass("active")},function(){h.removeClass("active")});e.hover(function(){g.addClass("active")},function(){timer=setTimeout(function(){g.removeClass("active")},500)});f.hover(function(){clearTimeout(timer)},function(){g.removeClass("active")})});define("modules/global/nav/shops_tip",function(f,d,c){var a={mod:"#nav",shopNav:"li[data-action=shopnav]",shopTips:"li[data-action=shoptips]"};var e=null;var i="navmall-active";var b=$(a.mod);var j=null;var h=function(){window.clearTimeout(e);if(!j){j=b.find(a.shopNav)}j.addClass(i)};var g=function(){window.clearTimeout(e);e=window.setTimeout(function(){j.removeClass(i)},200)};b.delegate(a.shopNav,"mouseover",h);b.delegate(a.shopTips,"mouseover",h);b.delegate(a.shopNav,"mouseout",g);b.delegate(a.shopTips,"mouseout",g)});define("modules/global/nav/favorite",function(d,c,b){var a={init:function(){this.url=window.location.href;this.title=window.document.title;this.addFav=this.addFav.bind(this);$(document).delegate("#nav a.toolbar-collect","click",this.addFav)},addFav:function(){if(document.all&&window.external){window.external.AddFavorite(this.url,this.title)}else{if(window.sidebar){window.sidebar.addPanel(this.title,this.url,"")}else{alert("浏览器不支持，请按Ctrl+D手动加入收藏夹!")}}}};a.init()});define("modules/huihui/index/banner/banner",function(d,c,b){var a={init:function(){this.$mod=$("#huihuiBanner");this.$wrapper=this.$mod.find("div.tab-content-wrap");this.$items=this.$wrapper.find("div.tab-content");this.$nextBtn=this.$mod.find("a.hico-down");this.$buttons=this.$mod.find("div.tab-nav a");if(this.$items.length<=1){return}this.lazyLoading()},lazyLoading:function(){var h=this.$items.slice(1).find("img");var f=false;var g=h.length;var e=function(){g--;if(g===0&&!f){f=true;this.initSlide()}};e=e.bind(this);$.each(h,function(m,k){var j=$(k);var l=j.data("src");j.attr("src",l).bind({load:e,error:e})})},initSlide:function(){var e=d("common/slide/slide");this.slide=new e(this.$wrapper,this.$items,{effect:"singSlide",direction:1});this.slide.suspend=false;this.addEvent()},addEvent:function(){this.onTick=this.onTick.bind(this);this.onMouseOver=this.onMouseOver.bind(this);this.onMouseOut=this.onMouseOut.bind(this);this.onNextClick=this.onNextClick.bind(this);this.onSelectClick=this.onSelectClick.bind(this);this.changeButton=this.changeButton.bind(this);window.setInterval(this.onTick,6000);$(document).delegate("#huihuiBanner","mouseover",this.onMouseOver);$(document).delegate("#huihuiBanner","mouseout",this.onMouseOut);this.$nextBtn.click(this.onNextClick);this.$buttons.click(this.onSelectClick)},onTick:function(f){if(!this.slide.suspend){this.onNextClick();this.changeButton(this.slide.getCurIndex())}},onMouseOver:function(f){this.slide.suspend=true;this.$nextBtn.addClass("active")},onMouseOut:function(f){this.slide.suspend=false;this.$nextBtn.removeClass("active")},onNextClick:function(f){this.slide.next();this.changeButton(this.slide.getCurIndex())},onSelectClick:function(g){var h=$(g.target);var f=0;if(h.hasClass("current")){return}f=h.index();this.slide.jump(f);this.changeButton(f)},changeButton:function(e){this.$buttons.filter("a.current").removeClass("current");this.$buttons.eq(e).addClass("current")}};a.init()});define("modules/huihui/index/list/nav",function(g,a){var c=$("#huiList li.h-category");var d="current";var b=300;var f;_.each(c,function(h,i){$(h).data("num",i)});var e=(function(){var h=$("#huiList li.h-category a.category-link");var k=$("#huiList li.h-category a.active").parent().data("num");var l=k;var j=k;var i="active";var m=function(){if(j===l){return}h.eq(l).removeClass(i);h.eq(j).addClass(i);l=j};return{show:m,statEnter:function(n){j=n},statOut:function(){j=k}}})();c.live("mouseenter",function(){f=$(this);e.statEnter(f.data("num"));clearTimeout(this.timer);this.timer=setTimeout(_.bind(function(){this.addClass(d);e.show()},f),b-100)}).live("mouseleave",function(){f=$(this);e.statOut();clearTimeout(this.timer);this.timer=setTimeout(_.bind(function(){this.removeClass(d);e.show()},f),b+100)})});define("modules/huihui/index/list/ajax.loader",function(d,c,b){var e=d("common/transceiver").create();var a={init:function(){this.selector={mod:"#huiList",btn:"#huiList [data-action=ajax-loader] a"};this.loadHandle=false;this.isAll=false;this.onBtnClick=this.onBtnClick.bind(this);$(document).delegate(this.selector.btn,"click",this.onBtnClick);var f=d("common/router");if(f.keys.goTab){this.scroll($(this.selector.mod))}},onBtnClick:function(f){var i=$(f.target).closest("a");var j=i.attr("href");var h=i.closest(this.selector.mod);f.preventDefault();if(i.find("span").hasClass("ico-category-all")){this.isAll=true}else{this.isAll=false}var g=["javas","cript:void(0)"].join("");if(j.indexOf(g)>=0){return}var k=j;if(j.indexOf("?")>=0){j+="&ajax=true"}else{j+="?ajax=true"}this.loader(j,k,h)},loader:function(g,h,f){if(this.loadHandle){return}this.loadHandle=true;$.ajax({cache:false,dataType:"html",timeout:30000,type:"GET",url:g,success:function(k){this.loadHandle=false;f.replaceWith(k);var i=$("li .hlist-list-pic img");e.trigger("shoplist:lazyload",i);var j=window.history;if(j.pushState){j.pushState({},window.document.title,h)}}.bind(this),error:function(i){this.loadHandle=false;App.showError(i)}.bind(this)});this.scroll(f)},scroll:function(g){var f=g.offset().top;if(this.isAll){f=0}$("html, body").animate({scrollTop:f},300)}};a.init()});define("fragments/huihui/hui_list/hover",function(f,a){var d="current";var c="huili-relevant-share-current";var b=400;var e;$(".hui-list li").live("mouseenter",function(){e=$(this);clearTimeout(this.timer);this.timer=setTimeout(_.bind(function(){this.addClass(d)},e),b)}).live("mouseleave",function(){e=$(this);clearTimeout(this.timer);this.timer=setTimeout(_.bind(function(){this.removeClass(d)},e),b)});$("li .huili-relevant-share").live("mouseenter",function(){e=$(this);clearTimeout(this.timer);this.timer=setTimeout(_.bind(function(){this.addClass(c)},e),b)}).live("mouseleave",function(){e=$(this);clearTimeout(this.timer);this.timer=setTimeout(_.bind(function(){this.removeClass(c)},e),b)})});define("fragments/huihui/hui_list/praise",function(j,a){var g=window.setTimeout;var k=window.clearTimeout;var l=j("common/transceiver").create();var e="share-clicked";var i=function(){if(this===window){return}var q=$(this);var p=q.find("b");if(!p||!p.length){return}var o=parseInt(p.html(),10)+1;p.html(o);b(q)};var h=function(p){p.preventDefault();var v="ding";var u=this;var t=$(this);var w=t.data("url");var r=null;if(!w){v="cai";r={reason:t.data("info")};t=t.parent().hide().parent();u=t[0];w=t.data("url")}var q=_.bind(i,u);var s=_.bind(n,u,u);var o=_.bind(b,u,t);if(!w||t.hasClass(e)){n(u);return}$.ajax({url:w,data:r,cache:false,success:function(x){if(x.status==="succ"){q()}else{o();s()}},error:s})};var c,m;var f="share-current";var n=function(o){b($(o));m=o.parentNode;c=$(m);if(c.hasClass(f)){return}c.addClass("share-current");m.timerId=g(_.bind(function(){this.removeClass("share-current")},c),3000)};var b=function(o){o.addClass(e)};$(".hui-list a.huili-relevant-ding").live("click",h);$(".hui-list .huili-relevant-cai[data-tips=0]").live("click",h);var d;$(document).delegate("span.huili-relevant-cai","mouseenter",function(o){o.preventDefault();k(d);var q=$(this);var p=q.find(".huili-relevant-cai-show");p.show()}).delegate("span.huili-relevant-cai","mouseleave",function(o){o.preventDefault();var q=$(this);var p=q.find(".huili-relevant-cai-show");d=g(function(){p.hide()},200)}).delegate("span.huili-relevant-cai span.huili-relevant-cai-show a","click",h)});define("fragments/huihui/hui_list/share",function(f,b){var a=f("common/share");var c={content:"",pic:"",source:"",title:"",url:""};var g=".hui-list a.share-link-";var d;var e={sina:a.toWeibo,kaixin:a.toKaixin001,renren:a.toRenRen,douban:a.toDouban,tencent:a.toTxWeibo,qqkongjian:a.toQzone};_.each(e,function(h,i){d=g+i;$(d).live("click",function(j){if(/http:\/\//.test($(this).attr("href"))){return}$pNode=$(this).parent();shareConf={content:$pNode.data("content")||c.content,pic:$pNode.data("pic")||c.pic,source:$pNode.data("source")||c.source,title:$pNode.data("title")||c.title,url:$pNode.data("url")||c.url};_.extend(a.config,shareConf);h(this)})})});define("fragments/huihui/hui_list/lazyload",function(d,a){var g=function(h){this._elem=h;this._top=$(h).offset().top-400;this._attr="src";this._event=null;this.show=null;this.next=null};g.prototype={_init:function(){var h=this;h._event=_.bind(_.throttle(h._check,200),h);$(window).bind("scroll",h._event);h._event();h.show=h._render},_check:function(){if($(window).scrollTop()+$(window).height()>this._top){this._render()}},_render:function(){var h=this._elem;var j=this;j._destroy();if(!$(h).data(j._attr)){return}var i=new Image();i.onload=function(){$(h).attr("src",$(h).data(j._attr))};i.onerror=function(){$(h).attr("src",$(h).data(j._attr))};i.src=$(h).data(j._attr)},_destroy:function(){$(window).unbind("scroll",this._event);this.show=function(){};if(this.next){var h=this.next;this.show=_.bind(function(){h.show()},h)}}};var c=[];var f=function(h){if(!h){return}c=h;var k,l,j,i;_.each(c,function(m){j=new g(m);j._init();if(l){l.next=j}l=j;if(!i){i=j}})};var e=d("common/transceiver").create();e.listen("shoplist:lazyload",function(h){f(h)});var b=$("li .hlist-list-pic img");e.trigger("shoplist:lazyload",b)});define("fragments/huihui/activity_list/activity_list",function(c,a){var b;var d="data-url";$("#activityList").delegate("a.go-count","click",function(){b=$(this).attr(d);if(b){$.ajax({url:b})}})});define("modules/huihui/index/newest/newest",function(d,c,b){var a={init:function(){var f=d("common/slide/slide");var e=$("#newest");var h=e.find(".newest-wrap");var g=h.find("a");var i=new f(h,g,{effect:"slide",direction:1});window.setInterval(function(){i.next()},5000)}};a.init()});define("modules/huihui/index/small_banner/small_banner",function(d,c,b){var a={init:function(){this.$mod=$("#smallBanner");this.$wrapper=this.$mod.find("ul.content-wrap");this.$items=this.$wrapper.find("li");this.$buttons=this.$mod.find("div.tab-nav a");if(this.$items.length<=1){return}this.lazyLoading()},lazyLoading:function(){var h=this.$items.slice(1).find("img");var f=false;var g=h.length;var e=function(){g--;if(g===0&&!f){f=true;this.initSlide()}};e=e.bind(this);$.each(h,function(m,j){var k=$(j);var l=k.data("src");k.attr("src",l).bind({load:e,error:e})})},initSlide:function(){var e=d("common/slide/slide");this.slide=new e(this.$wrapper,this.$items,{effect:"singSlide",direction:1});this.slide.suspend=false;this.addEvent()},addEvent:function(){this.onTick=this.onTick.bind(this);this.onMouseOver=this.onMouseOver.bind(this);this.onMouseOut=this.onMouseOut.bind(this);this.onSelectClick=this.onSelectClick.bind(this);this.changeButton=this.changeButton.bind(this);window.setInterval(this.onTick,9000);this.onTick();$(document).delegate("#smallBanner","mouseover",this.onMouseOver);$(document).delegate("#smallBanner","mouseout",this.onMouseOut);this.$buttons.click(this.onSelectClick)},onTick:function(f){if(!this.slide.suspend){this.slide.next();this.changeButton(this.slide.getCurIndex())}},onMouseOver:function(f){this.slide.suspend=true},onMouseOut:function(f){this.slide.suspend=false},onSelectClick:function(g){var h=$(g.target);var f=0;if(h.hasClass("current")){return}f=h.index();this.slide.jump(f);this.changeButton(f)},changeButton:function(e){this.$buttons.filter("a.current").removeClass("current");this.$buttons.eq(e).addClass("current")}};a.init()});define("modules/huihui/index/shop/shop",function(d,c,b){var a={init:function(){var e=d("common/tab_menu");this.lazyloading=this.lazyloading.bind(this);this.tabMenu=new e({wrap:"#shop .tab-wrap",navs:".tab-nav a",contents:".tab-content-wrap .tab-content",navCurStyle:"current",contentCurStyle:"current",eventName:"mouseover",callback:this.lazyloading})},lazyloading:function(){var e=this.tabMenu.getIndex();var f=this.tabMenu.$contents.eq(e).find("img");$.each(f,function(g,h){var i=$(h);var j=i.data("src");if(j!==""){i.attr("src",j);i.data("src","")}})}};a.init()});define("modules/huihui/index/huodong/huodong",function(d,c,b){var a={init:function(){var f=d("common/slide/slide");var e=$("#minisite");var h=e.find("ul");var g=h.find("li");this.slide=new f(h,g,{effect:"slide"});this.onSelectClick=this.onSelectClick.bind(this);$(document).delegate("#minisite .hd a","click",this.onSelectClick)},onSelectClick:function(f){var g=$(f.target);if(g.hasClass("forward")){this.slide.next()}else{this.slide.prev()}}};a.init()});define("modules/huihui/index/discount/discount",function(d,c,b){var a={init:function(){var e=$(".p-huihui-detail").length;if(!window.XMLHttpRequest){return}if(e){return}this.$mod=$("#discount");this.$mod.find("div[data-action=sider-ad]").show();this.originPosition=this.$mod.css("position");this.originTop=this.$mod.offset().top;this.handle=null;this.onScroll=this.onScroll.bind(this);$(window).scroll(this.onScroll)},onScroll:function(){var e=function(){var f=$(document).scrollTop();if(f>this.originTop){this.$mod.css({position:"fixed",top:0})}else{this.$mod.css({position:this.originPosition,top:this.originTop})}};e=e.bind(this);window.clearTimeout(this.handle);this.handle=window.setTimeout(e,50)}};a.init()});define("modules/global/new_feedback/new_feedback",function(d,c,b){var a={init:function(){this.$mod=$("#newFeedback");this.$topButton=this.$mod.find("a.forward");this.addEvent()},addEvent:function(){this.$mod.delegate("a.forward","click",this.toTop);var e=null;var f=50;this.onScroll=this.onScroll.bind(this);$(window).bind("scroll",(function(){window.clearTimeout(e);e=window.setTimeout(this.onScroll,f)}).bind(this));this.onScroll();var g=null;if(!window.XMLHttpRequest){$(window).bind("resize",(function(){window.clearTimeout(g);e=window.setTimeout(this.onScroll,f)}).bind(this))}},toTop:function(f){$("html, body").animate({scrollTop:0},200);f.preventDefault()},onScroll:function(){var f=$(document).scrollTop();if(f>0){this.$topButton.fadeIn()}else{this.$topButton.fadeOut()}if(window.XMLHttpRequest){return}var e=$(window).height();this.$mod.css("top",f+e-0+"px")}};a.init()});define("modules/huihui/login_guide/login_guide",function(d,c,b){var a={init:function(){this.$mod=$("#loginGuide");this.addEvent()},addEvent:function(){var f=this;var h=null;var e=null;var g=50;if(!window.XMLHttpRequest){this.onScroll=this.onScroll.bind(this);$(window).bind("scroll",(function(){window.clearTimeout(e);e=window.setTimeout(this.onScroll,g)}).bind(this));$(window).bind("resize",(function(){window.clearTimeout(h);e=window.setTimeout(this.onScroll,g)}).bind(this));this.onScroll()}this.$mod.delegate(".input-psw input","focus",function(){$(this).parent().find("span").hide()});this.$mod.delegate(".input-psw input","blur",function(){if($(this).val()===""){$(this).parent().find("span").show()}});this.$mod.delegate(".close-times","click",function(){f.$mod.remove()});this.$mod.delegate("#loginGuide form","submit",function(j){var l=$("#loginGuide input[name=username]");var i=$("#loginGuide input[name=password]");var k=$.trim(l.val());if(k===""||k===l.attr("def-data")){l.focus();j.preventDefault();return}if($.trim(i.val())===""){i.focus();j.preventDefault();return}})},onScroll:function(){var f=$(document).scrollTop();var e=$(window).height();this.$mod.css("top",f+e-90+"px")}};a.init()});define("modules/template/verifyphone_dailog/verifyphone",function(f,c,b){var d={tmpl:"#tmpl-verifyphoneDialog"};var a;function e(i){a=a||$(d.tmpl);var h=a.tmpl(i);$.fancybox.show(h,function(){var j=f("modules/template/verifyphone_dailog/phone.code");var k=j;k.init(i.type,i.phone,h);var l=f("modules/template/verifyphone_dailog/phone.bind");l.init(h,i.callback)})}var g=f("common/transceiver").create();g.listen("mobile:validate:show",function(h){e(h)})});define("fragments/login/login",function(f,b,a){var d=f("common/validate_feild");var g=f("common/account_suggest");var c=f("common/cookie");var e={init:function(){this.selector={container:"div.login-container",userName:"input.input-s[name=username]",password:"input.input-s[name=password]",skipUrl:"input[name=url]",validateTip:"#loginTiparea",validateTipCloseButton:"#loginTiparea a",saveLogin:"#savelogin",saveLoginTip:"#rememberPsw",saveLoginTipCloseButton:"#rememberPsw a"};this.addEvent();var h=$(this.selector.container);if(h.length===0){return}var j=h.find(this.selector.userName);var i=h.find(this.selector.password);var k=new g({obj:j,password:i,appendTo:"div.login-container div.login-tip"});j.bind("keydown",function(m){if(m.keyCode===13){i.focus();m.preventDefault()}});var l=c.get("P_INFO");if(typeof l==="string"&&l.split("|")[0].indexOf("@")>0){j.val(l.split("|")[0]).removeClass("color-gray")}},addEvent:function(){var h=null;for(h in this){if(typeof this[h]==="function"){this[h]=this[h].bind(this)}}$(document).delegate(this.selector.saveLogin,{mouseover:this.showsaveLoginTip,mouseout:this.hidesaveLoginTip});$(document).delegate(this.selector.saveLoginTipCloseButton,"click",this.hidesaveLoginTip);$(document).delegate(this.selector.container+" form","submit",this.onSubmit);$(document).delegate(this.selector.validateTipCloseButton,"click",this.hideValidateTip);$(document).delegate(this.selector.container+" "+this.selector.userName,"focus",this.hideValidateTip);$(document).delegate(this.selector.container+" "+this.selector.password,"focus",this.hideValidateTip)},showsaveLoginTip:function(){$(this.selector.saveLoginTip).show()},hidesaveLoginTip:function(){$(this.selector.saveLoginTip).hide()},showValidateTip:function(){$(this.selector.validateTip).show()},hideValidateTip:function(){$(this.selector.validateTip).hide()},onSubmit:function(i){var h=$(this.selector.container);var l=h.find(this.selector.userName);var j=h.find(this.selector.password);var o=h.find(this.selector.skipUrl);var m=$.trim(l.val());var n=$.trim(j.val());var k=l.attr("def-data");if($.trim(o.val())===""){o.val(window.location.href)}if(m===""||m===k||!d.rules.email.test(m)||!d.rules.min6(n)){this.showValidateTip();i.preventDefault();return}}};e.init()});define("modules/template/oauth_cancel_dailog/oauth_cancel_dailog",function(f,c,b){var d={tmpl:"#tmpl-oauthCancelDailog",mod:"#oauthCancelDailog",sureButton:"a.sure",cancelButton:"a.cancel"};var e={title:"系统提示",content:"确定？",sureHandle:null,cancelHandle:function(){$.fancybox.close()}};var a;function h(j){var i=$(d.mod);i.delegate(d.sureButton,"click",function(){if($.isFunction(j.sureHandle)){j.sureHandle()}});i.delegate(d.cancelButton,"click",function(){if($.isFunction(j.cancelHandle)){j.cancelHandle()}})}var g=f("common/transceiver").create();g.listen("oauth:cancel:dailog",function(i){a=a||$(d.tmpl);var j=$.extend({},e,i);$.fancybox.show(a.tmpl(j),function(){h(j)})})});define("common/user_account",function(g,c,b){var d=g("common/cookie");var a=g("common/config");var h=g("common/account_suggest");var e={};var f={$activeTmpl:null,$loginTmpl:null,activeCallBack:null,init:function(){var i=null;for(i in this){if(typeof this[i]==="function"){this[i]=this[i].bind(this)}}},isLogin:function(i){if(d.get("NTES_LOGINED")){if(typeof i==="function"){i()}return}this.$loginTmpl=this.$loginTmpl||$("#tmpl-loginDailog");$.fancybox.show(this.$loginTmpl.tmpl(),this.bindLoginForm)},isActive:function(i){this.isLogin(i)},isNeteaseAccount:function(l,k,j){var i=$.trim(l);if(e[i]){if($.isFunction(k)){k()}return}$.ajax({cache:false,dataType:"json",timeout:30000,type:"GET",data:{username:i},url:a.validateAccount,success:function(m){if(m.status==="succ"){e[i]=true;if($.isFunction(k)){k()}return}if($.isFunction(j)){j()}}})},resetCookie:function(){var i={type:"CHECK_ACTIVATE",pwd:new Date().getTime()};$.ajax({cache:false,data:i,timeout:30000,url:a.userInfo,success:this.checkActive})},checkActive:function(){if(d.get("gw_activated")){if(typeof this.activeCallBack==="function"){this.activeCallBack()}return}this.$activeTmpl=this.$activeTmpl||$("#tmpl-userActiveDailog");$.fancybox.show(this.$activeTmpl.tmpl(),this.bindActiveForm)},bindLoginForm:function(){var j=$("div.login-container input.input-s[name=username]");var i=$("div.login-container input.input-s[name=password]");var k=new h({obj:j,password:i,appendTo:"div.login-container"});j.bind("keydown",function(m){if(m.keyCode===13){i.focus();m.preventDefault()}});var l=d.get("P_INFO");if(typeof l==="string"&&l.split("|")[0].indexOf("@")>0){j.val(l.split("|")[0]).removeClass("color-gray")}},bindActiveForm:function(){$(".activate-container form").bind("submit",this.onActiveSubmit)},onActiveSubmit:function(i){var j=$(".activate-container .login-btn span");if(j.attr("class")!=="btni04"){return}var k={subEdm:0};if($("#userActivateDailog1").attr("checked")){k.subEdm=1}$.ajax({cache:false,data:k,dataType:"json",timeout:30000,type:"post",url:a.active,success:this.onActiveSucc,error:this.showActiveError});i.preventDefault()},onActiveSucc:function(i){if(i.status==="succ"){if(typeof this.activeCallBack==="function"){this.activeCallBack()}else{$.fancybox.close()}}else{this.showActiveError()}},showActiveError:function(){var i="真抱歉！系统出错啦，请稍后到惠惠首页激活吧~您可以先逛逛超值购或全攻略，但购物前记得一定要先激活才能拿返现哦~";App.showError(i)}};f.init();return f});define("common/selection",function(e,b,a){function d(f,h,j){if(!f){return}h=h<0?0:h;j=j<h?h:j;function g(){if(h!==j){return}var k=!!(window.attachEvent&&navigator.userAgent.indexOf("Opera")===-1);if(!k){return}window.setTimeout(function(){f.blur();window.setTimeout(function(){f.focus()},0)},0)}if(f.setSelectionRange){f.focus();f.setSelectionRange(h,j);g();return}if(f.createTextRange){var i=f.createTextRange();i.collapse(true);i.moveStart("character",h);i.moveEnd("character",j-h);i.select();g()}}var c=e("common/app.ctrl");c.extend({Selection:{setSelectionRange:d}})});define("common/app_loading",function(d,b,a){var e=$('<div style="position:absolute;top:0;width:100%;background-color:#FFF;z-index:auto;">');var c=false;var g=false;var f={};e.css("opacity",0.5);f.loading={shade:function(i){var h;if(c){return}c=true;if(!!!i){i=$("body")}h=i.height();e.css("height",h+"px");if(i.css("position")==="static"){i.css("position","relative");g=true}e.appendTo(i)},shadeMove:function(){if(g){e.parent().css("position","static");g=false}e.remove();c=false}};$.extend(App,f)});define("common/app.ctrl",function(e,c,b){window.App=window.App||{};var a=window.App;function f(){return a}function d(g){$.extend(a,g)}return{getInstance:f,extend:d}});define("common/fancybox.plus",function(g,c,b){var e={closeButton:".fancybox-close"};var a=[];var f=false;function d(j){var h=j.content;var i=j.completeCallback;$.fancybox({content:h,centerOnScroll:true,modal:true,overlayOpacity:0.6,overlayColor:"#000000",onComplete:function(){i()}})}$.fancybox.show=function(h,i){a.push({content:h,completeCallback:function(){if($.isFunction(i)){i()}if(a.length===0){f=false}else{d(a.shift())}}});if(f){return}f=true;d(a.shift())};$(document).delegate(e.closeButton,"click",function(h){$.fancybox.close();h.preventDefault()})});define("common/phone.auth",function(f,b,a){var e=false;var d={isAuth:function(h){var i=this;var g=f("common/config");if(e){return}e=true;$.ajax({cache:false,dataType:"json",timeout:30000,type:"GET",url:g.isPhoneAuth,success:function(j){e=false;if(j.status==="succ"){h();return}i.add(null,h)},error:function(j){e=false;App.showError()}})},add:function(g,h){var i=f("common/transceiver").create();i.trigger("mobile:validate:show",{type:0,phone:g,callback:h})},update:function(g){var h=f("common/transceiver").create();h.trigger("mobile:validate:show",{type:1,callback:g})}};var c=f("common/app.ctrl");c.extend({phoneAuth:d})});define("common/transceiver",function(f,b,a){var c=[];var g=0;function d(){this.id="t-"+(g++)}var e={listen:function(i,k,j){var m=this._callbacks||(this._callbacks={});var l=m[i]||(m[i]=[]);l.push([k,j]);return this},unlisten:function(j,k){var o;if(!j){this._callbacks={}}else{if(o=this._callbacks){if(!k){o[j]=[]}else{var n=o[j];if(!n){return this}for(var p=0,m=n.length;p<m;p++){if(n[p]&&k===n[p][0]){n[p]=null;break}}}}}return this},_trigger:function(q){var p,r,j,n,m;var k=2;if(!(r=this._callbacks)){return this}while(k--){j=k?q:"all";if(p=r[j]){for(var s=0,o=p.length;s<o;s++){if(!(n=p[s])){p.splice(s,1);s--;o--}else{m=k?Array.prototype.slice.call(arguments,1):arguments;n[0].apply(n[1]||this,m)}}}}return this},trigger:function(j){var i=[].slice.call(arguments);_.each(c,function(k){_.defer.apply(_,[_.bind(k._trigger,k)].concat(i))})}};_.extend(d.prototype,e);function h(){var i=new d();c.push(i);return i}return{create:h}});define("common/config",function(e,c,b){var a="";var d={active:"/activate/request.json",baseUrl:a,data:a+"back.php",errorImage:"http://placehold.it/670x450",errorMsg:"真抱歉！系统出错啦！请稍后访问！",exchangeCash163:"/account/epay/transfer.json",exchangeCashAlipay:"/account/alipay/transfer.json",exchangeGoods:function(f,g){return"/coupons/"+f+"/exchange.json"},exchangeRate:100,favor:function(f){return"/deals/"+f+"/fav.json"},getAlipayAccount:"/account/alipay/info.json",getCouponsSugget:"/suggest/coupons.json",getGoodsPics:function(f){return a+"back.php?call=getGoodsPics&id="+f},getGoodsPrices:function(f){return a+"back.php?call=getGoodsPrices&id="+f},getGoodsSugget:"http://gsuggest.ydstatic.com/suggest/suggest.s?o=_hui_goods&count=10&keyfrom=GouwuSuggest.suggest",getPageHtml:function(f){return a+"back.php?call=getPageHtml&pageNo="+f},getShop:a+"getShop.php",getShopComment:function(f,g){return"/mall/"+f+"/comments?1=1&page="+g},getShopSugget:"/suggest/shops.json",getUserPoint:"/account/summary/available.json",isPhoneAuth:"/account/info//auth_phone.json",isTest:"test",log:"/log?",noticeTime:30,notice:"/remind/unread.json",postShopComment:function(f){return"/mall/"+f+"/comments.json"},readAll:"/remind/read_all.json",register:"/register/regist",saveUnionLogin:"/account/union",setAccount:"/account/info/identity.json",setAlipayAccount:"/account/alipay/info/modify.json",share:function(f){return"/deals/"+f+"/share.json"},userInfo:"/log",updateUserInfo:"/account/info/update.json",validateAccount:"/register2/check_username.json",check:a+"/log",getDomain:function(){var f=window.location.host.split(":")[0];return"."+f}};return d});define("common/key.scorll",function(c,b,a){var d={init:function(){this.handle=false;this.isTrigger=true;this.originGoValue=400;this.goValue=400;this.delay=500;this.$elem=$("html, body");this.addEvent()},addEvent:function(){this.keydownProcess=this.keydownProcess.bind(this);this.scorll=this.scorll.bind(this);$(document).bind("keydown",this.keydownProcess);$(document).delegate("input, textarea","focus",(function(){this.isTrigger=false}).bind(this));$(document).delegate("input, textarea","blur",(function(){this.isTrigger=true}).bind(this))},keydownProcess:function(f){if(this.handle){this.goValue+=200;return}this.handle=true;window.setTimeout((function(){this.scorll(f);this.handle=false}).bind(this),50)},scorll:function(g){if(!(g.keyCode===74||g.keyCode===75)){return}if(!this.isTrigger){return}var j=$(document).scrollTop();var f=$(document).height();var k=$(window).height();var h=0;var i=function(){this.goValue=this.originGoValue};i=i.bind(this);if(g.keyCode===74){h=j+this.goValue;if(j+k===f){i();return}}if(g.keyCode===75){h=j-this.goValue;if(j===0){i();return}}this.$elem.stop();this.$elem.animate({scrollTop:h},this.delay,i)}};return d});define("common/cookie",function(e,b,a){var d=function(k,f,h){var j;var g=k+"="+escape(f)+";path=/";var i=window.location.host.split(":")[0];i="."+i;g+=";domain="+i;if(!!parseInt(h)){j=new Date();j.setDate(j.getDate()+h);g+=";expires="+j.toGMTString()}document.cookie=g};var c={add:function(h,f,g){if(this.get(h)){throw"this cookie is already exsit!"}d(h,f,g)},clear:function(){var f=this.getAll();for(var g in f){if(g!==""){this.del(g)}}},del:function(f){if(!this.get(f)){throw"this cookie is undefined!"}d(f,0,-1)},update:function(h,f,g){if(!this.get(h)){throw"this cookie is undefined!"}d(h,f,g)},get:function(f){return this.getAll()[f]},getAll:function(){var g=document.cookie.split(";");var h={};var f;var k;for(var l=0,j=g.length;l<j;l++){f=g[l].split("=");k=f[0].replace(/^\s*|\s*$/g,"");if(f[1]){h[k]=f[1]}}return h}};return c});define("common/slide/slide",function(e,b,a){var f=e("common/slide/effect.list");var d={pageSize:1,effect:"show",direction:0};var c=function(){this.init.apply(this,arguments)};c.prototype={init:function(h,g,i){this.params=$.extend({},d,i);this.$wrapper=h;this.$items=g;this.pageSize=this.params.pageSize;this.direction=this.params.direction;this.effect=f[this.params.effect]||f[d.effect];this.curIndex=0;this.pageCount=parseInt(this.$items.length/this.pageSize,10);this.effect.init.call(this)},prev:function(){this.jump(this.curIndex-1)},next:function(){this.jump(this.curIndex+1)},jump:function(h){if(h<0){h=this.pageCount-1}if(h>this.pageCount-1){h=0}var g=this;this.effect.swap.call(this,h,function(){g.curIndex=h})},getCurIndex:function(){return this.curIndex}};return c});define("common/router",function(c,b,a){var d={init:function(){this.keys={};this.getKeyList()},getKeyList:function(){var e=window.location.href.split("#")[1];if(!e||e===""){return}var f=e.split("&");$.each(f,(function(i,h){var g=h.split("=");if(g.length>0&&g[0]!==""){this.keys[g[0]]=g[1]}}).bind(this))}};d.init();return d});define("common/share",function(n,a,b){var i={};var h=window.encodeURIComponent;var f=i.config={url:"http://news.163.com/photoview/00AN0001/23896.html",title:"西安发生大面积路面塌陷",content:"2012年5月27日，西安市一条马路的路面突然塌陷，路面塌出一个长约15米，宽约10米，深约6米的大坑。坑中有一个直径约1米的管道断裂，断裂层厚度约10厘米。",pic:"http://img4.cache.netease.com/photo/0001/2012-05-28/900x600_82JTFEU900AN0001.jpg",source:"网易新闻"};function m(p){return p&&p.nodeType===1&&p.tagName.toUpperCase()==="A"}var o=i.toWeibo=function(p){var r="http://v.t.sina.com.cn/share/share.php?";var q=["appkey=","title="+h(f.content),"url="+h(f.url),"pic="+h(f.pic),"source="+h(f.source),"sourceUrl="+h(f.url)];if(!m(p)){return r+q.join("&")}p.setAttribute("href",r+q.join("&"))};var j=i.to163=function(p){var r="http://t.163.com/article/user/checkLogin.do?";var q=["link="+h(f.url),"info="+h(f.content),"images="+h(f.pic),"source="+h(f.source),"togImg=true"];if(!m(p)){return r+q.join("&")}p.setAttribute("href",r+q.join("&"))};var c=i.toTxWeibo=function(p){var r="http://v.t.qq.com/share/share.php?";var q=["appkey=","url="+h(f.url),"title="+h(f.content),"pic="+h(f.pic),"site="+h(f.source)];if(!m(p)){return r+q.join("&")}p.setAttribute("href",r+q.join("&"))};var g=i.toQzone=function(p){var r="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?";var q=["url="+h(f.url),"title="+h(f.title),"pics="+h(f.pic),"summary="+h(f.content)];if(!m(p)){return r+q.join("&")}p.setAttribute("href",r+q.join("&"))};var k=i.toRenRen=function(p){var r="http://widget.renren.com/dialog/share?";var q=["resourceUrl="+h(f.url),"pic="+h(f.pic),"title="+h(f.title),"description="+h(f.content),"message="];if(!m(p)){return r+q.join("&")}p.setAttribute("href",r+q.join("&"))};var e=i.toKaixin001=function(p){var r="http://www.kaixin001.com/rest/records.php?";var q=["url="+h(f.url),"content="+h(f.content),"pic="+h(f.pic),"starid=0","aid=0","style=11","stime=","sig="];if(!m(p)){return r+q.join("&")}p.setAttribute("href",r+q.join("&"))};var d=i.toDouban=function(p){var r="http://shuo.douban.com/!service/share?";var q=["href="+h(f.url),"image="+h(f.pic),"name="+h(f.title)];if(!m(p)){return r+q.join("&")}p.setAttribute("href",r+q.join("&"))};var l=n("common/app.ctrl");l.extend({share:i});return i});define("common/tab_menu",function(e,b,a){var d={wrap:".tab-wrap",navs:".tab-nav a",contents:".tab-content-wrap .tab-content",navCurStyle:"current",contentCurStyle:"current",eventName:"click",start:null,callback:null};function c(f){this.init(f)}c.prototype={init:function(g){this.params=$.extend({},d,g);this.$wrap=$(this.params.wrap);this.$navs=this.$wrap.find(this.params.navs);this.$contents=this.$wrap.find(this.params.contents);var f=this;this.$navs.live(this.params.eventName,function(i){i.preventDefault();var j=$(this);var h=f.$navs.index(j);f.currentIndex=h;if($.isFunction(f.params.start)){f.params.start(function(){f.swap(h)})}else{f.swap(h)}})},swap:function(g){if(g<0||g>this.$navs.length-1){return}var h=this.$navs.eq(g);var f=this.$contents.eq(g);if(h.hasClass(this.params.navCurStyle)){return}this.$navs.removeClass(this.params.navCurStyle);h.addClass(this.params.navCurStyle);if(f.length==0){return}this.$contents.removeClass(this.params.contentCurStyle);f.addClass(this.params.contentCurStyle);if($.isFunction(this.params.callback)){this.params.callback()}},swapTab:function(h){var g=this.$navs.filter("[data-tabname="+h+"]");var f=this.$navs.index(g);this.swap(f)},getIndex:function(){return this.$navs.index(this.$navs.filter("."+this.params.navCurStyle))},currentIndex:0};return c});define("modules/template/verifyphone_dailog/phone.code",function(m,b,c){var l={code:"input[data-action=code]",codeButton:"a[data-action=code-button]"};var k=0;var f;var d;var j;var e;var n;var g;function o(){if(k>0){g.html("（"+k+"）秒后重新获取").addClass("disabled")}else{g.html("免费获取验证码").removeClass("disabled");window.clearInterval(f)}}function h(p){var r="div.dtips[data-ikey=invalid-"+p+"]";var s=e.find(r);if(s.length>0){s.show();return}App.showError(p)}function i(){if(k>0){return}if(!d){return}f=window.setInterval(function(){k--;o()},1000);k=59;o();$.ajax({cache:false,dataType:"json",timeout:30000,type:"POST",data:{phone:d},url:j,success:function(p){if(p.status==="fail"){h(p.message);if(p.message==="duplicated_phone"){k=0;o()}return}},error:function(p){k=0;o()}})}function a(r,p,q){e=q;n=e.find(l.code);g=e.find(l.codeButton);d=p;j=g.data("url");if(r===0&&k===0){i()}else{o()}g.bind("click",function(){i()})}return{init:a,setPhone:function(p){d=p}}});define("modules/template/verifyphone_dailog/phone.bind",function(k,a,b){var i={submit:"span[data-action=submit]"};var j=[];var l;var f;var h;var g;var c;function e(){if(!h){h=c.find(i.submit).data("url")}if(g){return}g=true;var p=k("common/form_helper");var n=p.getFeildsByName(c);var o=p.getDataMap(n);$.ajax({cache:false,dataType:"json",timeout:30000,type:"POST",url:h,data:o,success:function(s){g=false;if(s.status==="succ"){if($.isFunction(f)){f.call({},$.trim(n.phone.val()))}else{$.fancybox.close()}return}var r=["div.dtips[data-ikey=invalid-","","]"];if(s.message==="phoneCodeError"){r[1]="phoneCodeError";c.find(r.join("")).show();return}if(s.message==="phoneError"){r[1]="phoneError";c.find(r.join("")).show();return}if(s.message==="invalidPhone"){r[1]="invalid_phone";c.find(r.join("")).show();return}if(s.message==="duplicatedPhone"){r[1]="duplicated_phone";c.find(r.join("")).show();return}if(s.message==="exceed_ip"){r[1]="exceed_ip";c.find(r.join("")).show();return}if(s.message==="exceed_phone"){r[1]="exceed_phone";c.find(r.join("")).show();return}if(s.message==="exceed_email"){r[1]="exceed_email";c.find(r.join("")).show();return}if(s.message==="exceed_frequency"){r[1]="exceed_frequency";c.find(r.join("")).show();return}if(s.message==="bad_request"){r[1]="bad_request";c.find(r.join("")).show();return}if(s.message==="sysError"||s.message==="sys_error"){r[1]="sys_error";c.find(r.join("")).show();return}App.showError(s.message)},error:function(q){g=false;App.showError()}})}function m(){l.$elem.bind("blur",function(){l.validate();if(!l.isPass){return}var n=k("modules/template/verifyphone_dailog/phone.code");var o=n;o.setPhone($.trim(l.$elem.val()))});c.delegate(i.submit,"click",function(){var n;for(n=0;n<j.length;n++){j[n].validate();if(!j[n].isPass){return}}e()})}function d(q,o){c=q;f=o;var p=k("common/validate_feild");var n=c.find("input");var r;j=[];for(r=0;r<n.length;r++){j.push(new p(n.eq(r)));if(n.eq(r).attr("name")==="phone"){l=j[r]}}n.eq(0).trigger("focus");m()}return{init:d}});define("common/account_suggest",function(d,b,a){var f={e1:["163.com","126.com","yeah.net","vip.163.com","vip.126.com","popo.163.com","188.com","qq.com","yahoo.com","yahoo.com.cn","gmail.com","hotmail.com","sina.com","sina.cn","sohu.com","netease.com"],e2:["qq.com","gmail.com","hotmail.com","sina.cn","sohu.com"],e3:["163.com","126.com","yeah.net","vip.163.com","vip.126.com","popo.163.com","188.com","qq.com","yahoo.com","yahoo.com.cn","sina.com"]};var c={obj:null,password:null,elist:f.e3,appendTo:document.body};var e=function(h){var g=h.obj;var i=h.password;if(!!!g||g.length===0){throw"the params conf is error"}g.attr("autocomplete","off");g.parents("form").attr("autocomplete","off");if(!!!i||i.length===0){throw"the params conf is error"}this.conf=$.extend({},c,h);this.init()};e.prototype={init:function(){this._createSuggestList();this._positon();this._initEvent()},_createSuggestList:function(){this.suglst=$('<ul class="account_suggest_ctn"><li class="title">请选择或继续输入...</li></ul>');var h=[];for(var k=0,j=this.conf.elist.length;k<j;k++){h[h.length]="<li>@"+this.conf.elist[k]+"</li>"}this.suglst.append(h.join(""));var g=$(this.conf.appendTo);if(g[0]!==document.body&&g.css("position")==="static"){g.css("position","relative")}$(this.conf.appendTo).append(this.suglst)},_positon:function(){var i=this.conf.obj.offset();var j=$(this.conf.appendTo);var g=j.offset();var k=0;var h=0;if(j[0]!==document.body){k=parseInt(j.css("border-left-width"));h=parseInt(j.css("border-top-width"));k=isNaN(k)?0:k;h=isNaN(h)?0:h}this.suglst.css({left:i.left-g.left-k,top:i.top-g.top+parseInt(this.conf.obj.outerHeight())-1-h,width:(parseInt(this.conf.obj.outerWidth())-2)})},_initEvent:function(){var g=navigator.appVersion;var h=g.match(/Konqueror|Safari|KHTML/)?"keydown":"keypress";var i=this;i.conf.obj.bind(h,function(l){var k=$(this);var j=l.keyCode;if(j==13){l.stopPropagation();l.preventDefault();return true}else{return true}});this.conf.obj.keyup(this.bind(this,this._keyupHandler));this.conf.obj.blur(this.bind(this,this._blurHandler));this.suglst.find("li").mouseover(this.bind(this,this._mouseoverHandler));this.suglst.find("li").mouseout(this.bind(this,this._mouseoutHandler))},_setContent:function(h){var g=this.suglst.find("li"),m=this.conf.elist;for(var k=0,j=m.length;k<j;k++){g[k+1].innerHTML=h+"@"+m[k]}},_keyupHandler:function(m){m.stopPropagation();m.preventDefault();var g,h,k=null,j=0,n=m.which;if(n===40){return this._downKeyHandler()}else{if(n===38){return this._upKeyHandler()}else{if(n===13){return this._enterKeyHandler()}else{g=this.conf.obj.val();g=$.trim(g);if(g.length==0){this.suglst.css("display","none");return}h=g.split("@");if(h.length===1){this._setContent(h[0]);this.suglst.find("li").show();this.suglst.css("display","block")}else{k=new RegExp("^"+h[1],"i");for(var p=0,o=this.conf.elist.length;p<o;p++){if(!k.test(this.conf.elist[p])){this.suglst.find("li").eq(p+1).hide().removeClass("on");j+=1}else{this.suglst.find("li").eq(p+1).show()}}if(j<this.conf.elist.length){this._setContent(h[0]);this.suglst.css("display","block")}else{this.suglst.hide();return false}}}}}},_blurHandler:function(j){j.stopPropagation();var h=this.suglst.find("li.on");var g=$.trim(this.conf.obj.val());var i=this.conf.obj.attr("def-data");if(g===""||g===i){this.conf.password.focus();return}if(this.suglst.css("display")==="none"){this.conf.password.focus();return}if(h.length!==0){this.conf.obj.val(h.html()).change();this.conf.password.focus()}else{h=this.suglst.find("li:visible");if(h.length<2){return}h=h.eq(1);this.conf.obj.val(h.html()).change();this.conf.password.focus()}this.suglst.hide()},_downKeyHandler:function(){if(this.suglst.css("display")==="none"){return false}var g=this.suglst.find("li.on"),h;if(g.length===0){g=this.suglst.find("li:visible").eq(1);g.addClass("on")}else{h=g.next("li");while(h.length!==0){if(h.css("display")==="none"){h=h.next("li")}else{break}}if(h.length===0){h=this.suglst.find("li:visible").eq(1)}g.removeClass("on");h.addClass("on")}return false},_upKeyHandler:function(){if(this.suglst.css("display")==="none"){return false}var h=this.suglst.find("li.on"),g;if(h.length===0){h=this.suglst.find("li:visible").last();h.addClass("on")}else{g=h.prev("li");while(!g.hasClass("title")){if(g.css("display")==="none"){g=g.prev("li")}else{break}}if(g.hasClass("title")){g=this.suglst.find("li:visible").last()}h.removeClass("on");g.addClass("on")}return false},_enterKeyHandler:function(){var g=this.suglst.find("li.on");if(g.length===0){return}this.conf.obj.val(g.html());this.suglst.hide().find("li.on").removeClass("on");this.conf.password.focus()},_mouseoutHandler:function(h){var g=$(h.target);if(g.hasClass("title")){return false}g.removeClass("on");return false},_mouseoverHandler:function(h){var g=$(h.target);if(g.hasClass("title")){return false}this.suglst.find("li.on").removeClass("on");g.addClass("on");return false},bind:function(h,g){return function(){g.apply(h,arguments)}}};return e});define("common/validate_feild",function(e,c,b){var a={show:function(h,f){var g=h.find(".prompt-state");g.filter("[data-ikey="+f+"]").show()},hide:function(h,f){var g=h.find(".prompt-state");g.filter("[data-ikey="+f+"]").hide()},hideAll:function(f){f.find(".prompt-state").hide()},exeRule:function(h,f){d.rules[h].lastIndex=0;var g=d.rules[h];if($.isFunction(g)){return g(f)}else{return g.exec(f)}}};var d=function(g,f){this.$elem=g;if(!f){this.$promptWrap=g.parent()}else{this.$promptWrap=f}this.isPass=false;var h=g.data("rules");this.rules=h?h.split(","):[];this.relation=g.data("relation");this.required=g.data("required");this.config()};d.prototype={config:function(){var g=this;var f=g.$elem;f.bind("blur",function(){g.validate()});f.bind("focus",function(){a.hideAll(g.$promptWrap)})},hideAll:function(){a.hideAll(this.$promptWrap)},validate:function(){var f=this.check();if(!f.isPass){a.show(this.$promptWrap,f.ikey)}},check:function(){var k=this;var j=k.$elem;var g=$.trim(j.val());var f="";var l=k.required===1;var h=j.attr("def-data");if(l){if(g===""||g===h){k.isPass=false}f="invalid-empty"}else{k.isPass=true}if(g!==""&&g!==h){if(k.relation&&k.relation==="or"){k.isPass=false;for(var i in k.rules){if(a.exeRule(k.rules[i],g)){k.isPass=true;break}}f="invalid-"+k.rules[0]}else{k.isPass=true;for(var i in k.rules){if(!a.exeRule(k.rules[i],g)){k.isPass=false;f="invalid-"+k.rules[i];break}}}}return{isPass:k.isPass,ikey:f}}};d.rules={cnChars:/^[\u4e00-\u9fa5]+$/g,encnChars:/^[\u4e00-\u9fa5A-Za-z0-9_]+$/g,decimal2:/^\d+(\.\d{1,2})?$/,email:/^([a-z0-9_][a-z0-9_.-]*)?[a-z0-9_-]@([a-z0-9-]+\.){0,4}([a-z0-9][a-z0-9-]{0,61})?[a-z0-9]\.[a-z]{2,6}$/i,ID:/^\d{15}|\d{18}$/g,IDs:function(f){var g=e("common/validate_identity");return g(f)},min6:function(f){return f.length>=6},phone:/^1\d{10}$/g,postCode:/^[0-9]\d{5}(?!\d)$/g,qq:/^[1-9][0-9]{4,}$/g,telphone:/^(\d{3}-)?\d{7,8}(-\d{1,6})?$|^(\d{4}-)?\d{7,8}(-\d{1,6})?$/g};return d});define("common/slide/effect.list",function(c,b,a){var d={};d.show={init:function(){var j=this.$wrapper;var i=this.$items;var f=this.direction;var h=this.pageSize;var g=i.eq(0).width();var e=i.eq(0).height();if(j.css("position")==="static"){j.css("position","relative")}i.css({position:"absolute",top:0,left:0});$.each(i,function(k,l){if(f===0){$(l).css("left",k%h*g)}else{$(l).css("top",k%h*e)}});i.slice(h).hide()},swap:function(i,h){var g=this.$items;var f=this.pageSize;var e=this.curIndex;if(i===e){return}g.slice(e*f,(e+1)*f).hide();g.slice(i*f,(i+1)*f).show();if($.isFunction(h)){h()}}};d.slide=c("common/slide/effect.slide");d.fade=c("common/slide/effect.fade");d.singSlide=c("common/slide/effect.sing.slide");return d});define("common/form_helper",function(d,b,a){var e="ignore-feild";var c={getFeildsByName:function(j){var f=j.find("input[class!="+e+"], textarea[class!="+e+"]");var h={};var g;for(var l=0,k=f.length;l<k;l++){g=$.trim(f.eq(l).attr("name"));if(g!==""&&!h[g]){h[g]=j.find("input[class!="+e+"][name="+g+"], textarea[class!="+e+"][name="+g+"]")}}return h},getDataMap:function(h){var k=h;var l="";var n="";for(var j in k){l+=j;l+="=";if(k[j].length===1){n=k[j].attr("type");switch(n){case"radio":throw"Exception: Only one radio button!";break;case"checkbox":l+=k[j].attr("checked")?true:false;break;default:var g=k[j].attr("def-data");var f=$.trim(k[j].val());if(g!=="undefined"&&f===g){f=""}l+=encodeURIComponent(f);break}}else{n=k[j].eq(0).attr("type");switch(n){case"radio":l+=$.trim(encodeURIComponent(k[j].filter("[checked]").val()));break;case"checkbox":for(var o=0,m=k[j].length;o<m;o++){if(!k[j].eq(o).attr("checked")){continue}l+=$.trim(encodeURIComponent(k[j].eq(o).val()));l+=","}if(l[l.length-1]===","){l=l.substring(0,l.length-1)}break;default:for(var o=0,m=k[j].length;o<m;o++){l+=$.trim(encodeURIComponent(k[j].eq(o).val()));if(o<m-1){l+=","}}break}}l+="&"}if(l!==""){l=l.substring(0,l.length-1)}return l}};return c});define("common/validate_identity",function(m,a,b){var j=/^[1-9]((\d{14})|(\d{16}(\d|x)))$/gi,n=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],c=["1","0","x","9","8","7","6","5","4","3","2"],l=[],f=new Date().getTime(),i=f-100*365*24*60*60*1000;var d=function(){var o=0;for(var q=0,p=n.length;q<p;q++){o+=n[q]*l[q]}return c[o%11]},e=function(o){return o.match(/\d|x/gi)},k=function(r,q){var o=function(s){return((s%4==0&&s%100!=0)||(s%400==0))?true:false},p=[31,28,31,30,31,30,31,31,30,31,30,31];if(q==2&&o(r)){return 29}return p[q-1]},h=function(){var q,p,o,r=new Date();if(l.length===18){q=l.slice(6,10).join("")-0;p=l.slice(10,12).join("")-0;o=l.slice(12,14).join("")-0}else{q="19"+l.slice(6,8).join("")-0;p=l.slice(8,10).join("")-0;o=l.slice(10,12).join("")-0}if(q===0||p===0||o===0||q>r.getFullYear()||p>12){return false}if(o>k(q,p)){return false}r.setFullYear(q);r.setMonth(p-1);r.setDate(o);if(r.getTime()>=f||r.getTime()<i){return false}return true};function g(o){o=o.toLowerCase();j.lastIndex=0;if(!j.test(o)){return false}l=e(o);if(l.length===18){if(l[l.length-1]!==d()){return false}}if(!h()){return false}return true}return g});define("common/slide/effect.sing.slide",function(d,b,a){var c={init:function(){var j=this.$wrapper;var i=this.$items;var f=this.direction;var h=this.pageSize;var g=i.eq(0).width();var e=i.eq(0).height();if(j.css("position")==="static"){j.css("position","relative")}j.css("overflow","hidden");i.css({position:"absolute",top:0,left:0});$.each(i,function(k,l){if(f===0){$(l).css("left",k%h*g)}else{$(l).css("top",k%h*e)}});i.slice(h).hide()},swap:function(k,j){var i=this.$items;var g=this.direction;var h=this.pageSize;var f=this.curIndex;var e=i.eq(0).height();if(k===f){return}i.hide().stop();$.each(i.slice(f*h,(f+1)*h),function(l,m){if(g===0){$(m).css({"z-index":100,top:0}).show()}else{$(m).css({"z-index":100,top:e*l}).show()}}),$.each(i.slice(k*h,(k+1)*h),function(l,m){if(g===0){$(m).css({"z-index":200,top:e}).show().animate({top:0},500)}else{$(m).css({"z-index":200,top:e*(l+1)}).show().animate({top:e*l},500)}});if($.isFunction(j)){j()}}};return c});define("common/slide/effect.slide",function(d,b,a){var c={init:function(){var i=this.$wrapper;var h=this.$items;var f=this.direction;var g=h.eq(0).width();var e=h.eq(0).height();if(i.css("position")==="static"){i.css("position","relative")}i.css("overflow","hidden");h.css({display:"block",position:"absolute",top:0,left:0});$.each(h,function(j,k){if(f===0){$(k).css("left",j*g)}else{$(k).css("top",j*e)}});if(f===0){i.scrollLeft(0)}else{i.scrollTop(0)}},swap:function(n,k){var l=this.$wrapper;var j=this.$items;var g=this.direction;var f=this.curIndex;var h=j.eq(0).width();var e=j.eq(0).height();var i=this.pageSize;var m={};if(n===f){return}l.stop();if(g===0){m={scrollLeft:n*i*h}}else{m={scrollTop:n*i*e}}l.animate(m,500);if($.isFunction(k)){k()}}};return c});define("common/slide/effect.fade",function(d,c,b){var a={init:function(){var j=this.$wrapper;var i=this.$items;var f=this.direction;var h=this.pageSize;var g=i.eq(0).width();var e=i.eq(0).height();if(j.css("position")==="static"){j.css("position","relative")}i.css({position:"absolute",top:0,left:0});$.each(i,function(k,l){if(f===0){$(l).css("left",k%h*g)}else{$(l).css("top",k%h*e)}});i.slice(h).hide()},swap:function(i,h){var g=this.$items;var f=this.pageSize;var e=this.curIndex;if(i===e){return}g.slice(e*f,(e+1)*f).fadeOut(500);g.slice(i*f,(i+1)*f).fadeIn(500);if($.isFunction(h)){h()}}};return a});define("page/p-huihui-index",function(c,b,a){c("common/es5");c("common/lib_plus");c("modules/global/top/notice_remind");c("modules/global/top/order_remind");c("modules/global/top/top");c("modules/global/search_box/suggest");c("modules/global/search_box/tips");c("modules/global/nav/nav");c("modules/global/nav/shops_tip");c("modules/global/nav/favorite");c("modules/huihui/index/banner/banner");c("modules/huihui/index/list/nav");c("modules/huihui/index/list/ajax.loader");c("fragments/huihui/hui_list/hover");c("fragments/huihui/hui_list/praise");c("fragments/huihui/hui_list/share");c("fragments/huihui/hui_list/lazyload");c("fragments/huihui/activity_list/activity_list");c("modules/huihui/index/newest/newest");c("modules/huihui/index/small_banner/small_banner");c("modules/huihui/index/shop/shop");c("modules/huihui/index/huodong/huodong");c("modules/huihui/index/discount/discount");c("modules/global/new_feedback/new_feedback");c("modules/huihui/login_guide/login_guide");c("modules/template/verifyphone_dailog/verifyphone");c("fragments/login/login");c("modules/template/oauth_cancel_dailog/oauth_cancel_dailog")});